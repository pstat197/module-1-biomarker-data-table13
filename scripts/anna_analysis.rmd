# Q2 Anna


2. Temporarily remove the outlier trimming from preprocessing and do some exploratory analysis of the outlying values. Are there specific subjects (not values) that seem to be outliers? If so, are outliers more frequent in one group or the other? (Hint: consider tabulating the number of outlying values per subject.)

preprocessing.R file code: outlier trimming removed
```{r}
library(tidyverse)


# get names
var_names <- read_csv('data/biomarker-raw.csv', 
                     col_names = F, 
                     n_max = 2, 
                     col_select = -(1:2)) %>%
  t() %>%
  as_tibble() %>%
  rename(name = V1, 
         abbreviation = V2) %>%
  na.omit()

# function for trimming outliers (good idea??)
trim <- function(x, .at){
  x[abs(x) > .at] <- sign(x[abs(x) > .at])*.at
  return(x)
}

# read in data
biomarker_clean <- read_csv('data/biomarker-raw.csv', 
         skip = 2,
         col_select = -2L,
         col_names = c('group', 
                       'empty',
                       pull(var_names, abbreviation),
                       'ados'),
         na = c('-', '')) %>%
  filter(!is.na(group)) %>%
  # log transform, center and scale, and trim
  
  mutate(across(.cols = -c(group, ados), 
                ~ scale(log10(.x))[, 1])) %>%  # no trimming

  # reorder columns
  select(group, ados, everything())

# export as r binary
  save(list = 'biomarker_clean',
     file = 'data/biomarker-clean-notrim.RData')  # new file for Q2


```

Load the untrimmed data:
```{r}
library(here)
library(knitr)
load(here("data", "biomarker-clean-notrim.RData"))
bm_notrim_clean <- biomarker_clean 

kable(head(bm_notrim_clean, 20))
         
```






